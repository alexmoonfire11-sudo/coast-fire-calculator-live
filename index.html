<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coast FIRE Calculator (MVP)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <div id="coast-fire-calculator">
        <h2>Your Path to Coast FI</h2>

        <div class="input-group">
            <label for="annualSpending">Estimated Annual Retirement Spending ($)</label>
            <input type="number" id="annualSpending" value="50000" min="1000" step="1000"
                oninput="calculateCoastFIRE()">
        </div>

        <div class="input-group">
            <label for="currentAge">Your Current Age (Years)</label>
            <input type="number" id="currentAge" value="30" min="18" max="70" oninput="calculateCoastFIRE()">
        </div>

        <div class="input-group">
            <label for="retirementAge">Target Retirement Age (Years)</label>
            <input type="number" id="retirementAge" value="55" min="40" max="80" oninput="calculateCoastFIRE()">
        </div>

        <div class="input-group">
            <label for="growthRate">Expected Annual Growth Rate (%)</label>
            <input type="number" id="growthRate" value="7" min="1" max="15" step="0.1" oninput="calculateCoastFIRE()">
        </div>

        <div class="input-group">
            <label for="inflationRate">Expected Annual Inflation Rate (%)</label>
            <input type="number" id="inflationRate" value="3" min="0" max="10" step="0.1"
                oninput="calculateCoastFIRE()">
        </div>

        <div id="results">
            <h3>Your Coast FIRE Numbers:</h3>

            <p class="result-label">Target FIRE Number (The Goal):</p>
            <p id="targetFire" class="result-output primary-result">$0</p>

            <p class="result-label">Coast FIRE Number (What you need TODAY):</p>
            <p id="coastFire" class="result-output secondary-result">$0</p>

            <p id="affiliate-cta">
                You have your Coast FI goal! Now, track all your accounts in one free, powerful dashboard to reach it
                faster.<br>
            <div class="button-wrapper">
                <a href="YOUR_EMPOWER_AFFILIATE_LINK" target="_blank" class="cta-button">
                    Track My Coast FIRE Goal for FREE
                </a>
            </div>
            </p>
        </div>
    </div>

    <script>
        // --- TEMPORARY STAGING GATE (Final Robust Version) ---
        (function () {
            const secretKey = "secret";

            // 1. Get user input.
            let enteredKey = prompt("‚ö†Ô∏è STAGING SITE: Please enter the temporary password to proceed:");

            // 2. Process the input defensively: 
            let cleanedKey = "";
            if (enteredKey !== null) {
                cleanedKey = enteredKey.toLowerCase().trim();
            }

            // 3. Test for FAILURE first. The script continues ONLY on success.
            if (cleanedKey !== secretKey) {
                alert("üõë Access Denied: Incorrect password. Please try again.");
                window.location.href = "about:blank";
                return; // Stops all script execution on failure
            }
        })();
        // --- END STAGING GATE ---

        // Function to format numbers as US Currency
        function formatCurrency(value) {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0,
            }).format(value);
        }

        // Main Calculator Function
        function calculateCoastFIRE() {
            // 1. GATHER INPUTS
            const annualSpending = parseFloat(document.getElementById('annualSpending').value);
            const currentAge = parseFloat(document.getElementById('currentAge').value);
            const retirementAge = parseFloat(document.getElementById('retirementAge').value);
            const growthRate = parseFloat(document.getElementById('growthRate').value) / 100;
            const inflationRate = parseFloat(document.getElementById('inflationRate').value) / 100;

            // 2. INPUT VALIDATION
            if (isNaN(annualSpending) || annualSpending <= 0 || retirementAge <= currentAge) {
                document.getElementById('targetFire').textContent = formatCurrency(0);
                document.getElementById('coastFire').textContent = formatCurrency(0);
                return;
            }

            // 3. CORE CALCULATIONS
            const safeWithdrawalRate = 0.04; // 4% Rule
            const targetFIRE = annualSpending / safeWithdrawalRate;
            const realRate = growthRate - inflationRate;
            const yearsToRetirement = retirementAge - currentAge;

            // Calculate Coast FIRE
            const coastFire = targetFIRE / Math.pow(1 + realRate, yearsToRetirement);

            // 4. DISPLAY RESULTS
            document.getElementById('targetFire').textContent = formatCurrency(targetFIRE);
            document.getElementById('coastFire').textContent = formatCurrency(coastFire);
        }
    </script>
</body>

</html>